<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0090)http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<title>Improving the Beginner’s PID: Reset Windup «  Project  Blog</title>

<link rel="stylesheet" href="./05_files/style.css" type="text/css" media="screen">
<link rel="alternate" type="application/rss+xml" title="Project  Blog RSS Feed" href="http://brettbeauregard.com/blog/feed/">
<link rel="alternate" type="application/atom+xml" title="Project  Blog Atom Feed" href="http://brettbeauregard.com/blog/feed/atom/">
<link rel="pingback" href="http://brettbeauregard.com/blog/xmlrpc.php">

<style type="text/css" media="screen">

	#page { background: url("http://brettbeauregard.com/blog/wp-content/themes/default/images/kubrickbgwide.jpg") repeat-y top; border: none; }

</style>



            <script type="text/javascript" async="" src="./05_files/ga.js"></script><script type="text/javascript">//<![CDATA[
            // Google Analytics for WordPress by Yoast v4.3.3 | http://yoast.com/wordpress/google-analytics/
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-9013272-1']);
				            _gaq.push(['_trackPageview']);
            (function () {
                var ga = document.createElement('script');
                ga.type = 'text/javascript';
                ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';

                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(ga, s);
            })();
            //]]></script>
			<link rel="alternate" type="application/rss+xml" title="Project  Blog » Improving the Beginner’s PID: Reset Windup Comments Feed" href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/brettbeauregard.com\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.5"}};
			!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;if(!g||!g.fillText)return!1;switch(g.textBaseline="top",g.font="600 32px Arial",a){case"flag":return g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3;case"diversity":return g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e;case"simple":return g.fillText(h(55357,56835),0,0),0!==g.getImageData(16,16,1,1).data[0];case"unicode8":return g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./05_files/wp-emoji-release.min.js" type="text/javascript"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="thingiverse_style-css" href="./05_files/style(1).css" type="text/css" media="all">
<script type="text/javascript" src="./05_files/jquery.js"></script>
<script type="text/javascript" src="./05_files/jquery-migrate.min.js"></script>
<link rel="https://api.w.org/" href="http://brettbeauregard.com/blog/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://brettbeauregard.com/blog/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://brettbeauregard.com/blog/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Improving the Beginner’s PID: Tuning Changes" href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-tuning-changes/">
<link rel="next" title="Improving the Beginner’s PID: On/Off" href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-onoff/">
<meta name="generator" content="WordPress 4.5">
<link rel="canonical" href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/">
<link rel="shortlink" href="http://brettbeauregard.com/blog/?p=769">
<link rel="alternate" type="application/json+oembed" href="http://brettbeauregard.com/blog/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fbrettbeauregard.com%2Fblog%2F2011%2F04%2Fimproving-the-beginner%25e2%2580%2599s-pid-reset-windup%2F">
<link rel="alternate" type="text/xml+oembed" href="http://brettbeauregard.com/blog/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fbrettbeauregard.com%2Fblog%2F2011%2F04%2Fimproving-the-beginner%25e2%2580%2599s-pid-reset-windup%2F&amp;format=xml">
<link rel="payment" type="text/html" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=br3ttb&amp;popout=1&amp;url=http%3A%2F%2Fbrettbeauregard.com%2Fblog%2F2011%2F04%2Fimproving-the-beginner%25e2%2580%2599s-pid-reset-windup%2F&amp;language=en_GB&amp;category=text&amp;title=Improving+the+Beginner%E2%80%99s+PID%3A+Reset+Windup&amp;description=Project+updates+and...+um...&amp;tags=Arduino%2CBeginner%27s+PID%2CPID%2Cblog">
<link rel="stylesheet" type="text/css" href="./05_files/shCore.css"><link rel="stylesheet" type="text/css" href="./05_files/shThemeDefault.css"><style type="text/css" id="syntaxhighlighteranchor"></style>
</head>
<body>
<div id="page">


<div id="header">
	<div id="headerimg">
		<h1><a href="http://brettbeauregard.com/blog/">Project  Blog</a></h1>
		<div class="description">Project updates and… um…</div>
	</div>
</div>
<hr>

	<div id="content" class="narrowcolumn">

	
		<div class="navigation">
			<div class="alignleft">« <a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-tuning-changes/" rel="prev">Improving the Beginner’s PID: Tuning Changes</a></div>
			<div class="alignright"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-onoff/" rel="next">Improving the Beginner’s PID: On/Off</a> »</div>
		</div>

		<div class="post-769 post type-post status-publish format-standard hentry category-coding category-pid tag-arduino tag-beginners-pid tag-pid author-admin" id="post-769">
			<h2>Improving the Beginner’s PID: Reset Windup</h2>

			<div class="entry">
				<p><small>(This is Modification #4 in a <a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/improving-the-beginners-pid-introduction">larger series</a> on writing a solid PID algorithm)</small></p>
<h3>The Problem</h3>
<p><a href="./05_files/Windup.png"><img src="./05_files/Windup.png" alt="" width="336" height="362" class="aligncenter size-full wp-image-949" srcset="http://brettbeauregard.com/blog/wp-content/uploads/2011/03/Windup.png 336w, http://brettbeauregard.com/blog/wp-content/uploads/2011/03/Windup-278x300.png 278w" sizes="(max-width: 336px) 100vw, 336px"></a><br>
Reset windup is a trap that probably claims more beginners than any other.  It occurs when the PID thinks it can do something that it can’t.  For example, the PWM output on an Arduino accepts values from 0-255.  By default the PID doesn’t know this.  If it thinks that 300-400-500 will work, it’s going to try those values expecting to get what it needs.  Since in reality the value is clamped at 255 it’s just going to keep trying higher and higher numbers without getting anywhere.</p>
<p>The problem reveals itself in the form of weird lags. Above we can see that the output gets “wound up” WAY above the external limit.  When the setpoint is dropped the output has to wind down before getting below that 255-line.</p>
<h3>The Solution – Step 1</h3>
<p><a href="./05_files/No-Windup.png"><img src="./05_files/No-Windup.png" alt="" width="336" height="362" class="aligncenter size-full wp-image-947" srcset="http://brettbeauregard.com/blog/wp-content/uploads/2011/03/No-Windup.png 336w, http://brettbeauregard.com/blog/wp-content/uploads/2011/03/No-Windup-278x300.png 278w" sizes="(max-width: 336px) 100vw, 336px"></a><br>
There are several ways that windup can be mitigated, but the one that I chose was as follows:  tell the PID what the output limits are. In the code below you’ll see there’s now a SetOuputLimits function.  Once either limit is reached, the pid stops summing (integrating.)  It knows there’s nothing to be done;  Since the output doesn’t wind-up, we get an immediate response when the setpoint drops into a range where we can do something.</p>
<h3>The Solution – Step 2</h3>
<p>Notice in the graph above though, that while we got rid that windup lag, we’re not all the way there. There’s still a difference between what the pid thinks it’s sending, and what’s being sent.  Why?  the Proportional Term and (to a lesser extent) the Derivative Term.  </p>
<p>Even though the Integral Term has been safely clamped, P and D are still adding their two cents, yielding a result higher than the output limit.  To my mind this is unacceptable.  If the user calls a function called “SetOutputLimits” they’ve got to assume that that means “the output will stay within these values.”  So for Step 2, we make that a valid assumption.  In addition to clamping the I-Term, we clamp the Output value so that it stays where we’d expect it.</p>
<p>(Note:  You might ask why we need to clamp both.  If we’re going to do the output anyway, why clamp the Integral separately?  If all we did was clamp the output, the Integral term would go back to growing and growing.  Though the output would look nice during the step up, we’d see that telltale lag on the step down.)</p>
<h3>The Code</h3>
<div><div id="highlighter_437162" class="syntaxhighlighter  css"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2 highlighted">17</div><div class="line number18 index17 alt1 highlighted">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2 highlighted">23</div><div class="line number24 index23 alt1 highlighted">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1 highlighted">52</div><div class="line number53 index52 alt2 highlighted">53</div><div class="line number54 index53 alt1 highlighted">54</div><div class="line number55 index54 alt2 highlighted">55</div><div class="line number56 index55 alt1 highlighted">56</div><div class="line number57 index56 alt2 highlighted">57</div><div class="line number58 index57 alt1 highlighted">58</div><div class="line number59 index58 alt2 highlighted">59</div><div class="line number60 index59 alt1 highlighted">60</div><div class="line number61 index60 alt2 highlighted">61</div><div class="line number62 index61 alt1 highlighted">62</div><div class="line number63 index62 alt2 highlighted">63</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="css comments">/*working variables*/</code></div><div class="line number2 index1 alt1"><code class="css plain">unsigned long lastTime;</code></div><div class="line number3 index2 alt2"><code class="css value">double</code> <code class="css plain">Input, Output, Setpoint;</code></div><div class="line number4 index3 alt1"><code class="css value">double</code> <code class="css plain">ITerm, lastInput;</code></div><div class="line number5 index4 alt2"><code class="css value">double</code> <code class="css plain">kp, ki, kd;</code></div><div class="line number6 index5 alt1"><code class="css plain">int SampleTime = </code><code class="css value">1000</code><code class="css plain">; //</code><code class="css value">1</code> <code class="css plain">sec</code></div><div class="line number7 index6 alt2"><code class="css value">double</code> <code class="css plain">outMin, outMax;</code></div><div class="line number8 index7 alt1"><code class="css plain">void Compute()</code></div><div class="line number9 index8 alt2"><code class="css plain">{</code></div><div class="line number10 index9 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">unsigned long now = millis();</code></div><div class="line number11 index10 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">int timeChange = (now - lastTime);</code></div><div class="line number12 index11 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">if(timeChange&gt;=SampleTime)</code></div><div class="line number13 index12 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">{</code></div><div class="line number14 index13 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css comments">/*Compute all the working error variables*/</code></div><div class="line number15 index14 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css value">double</code> <code class="css plain">error = Setpoint - Input;</code></div><div class="line number16 index15 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css plain">ITerm+= (ki * error);</code></div><div class="line number17 index16 alt2 highlighted"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css plain">if(ITerm&gt; outMax) ITerm= outMax;</code></div><div class="line number18 index17 alt1 highlighted"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css plain">else if(ITerm&lt; outMin) ITerm= outMin;</code></div><div class="line number19 index18 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css value">double</code> <code class="css plain">dInput = (Input - lastInput);</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css comments">/*Compute PID Output*/</code></div><div class="line number22 index21 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css plain">Output = kp * error + ITerm- kd * dInput;</code></div><div class="line number23 index22 alt2 highlighted"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css plain">if(Output &gt; outMax) Output = outMax;</code></div><div class="line number24 index23 alt1 highlighted"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css plain">else if(Output &lt; outMin) Output = outMin;</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css comments">/*Remember some variables for next time*/</code></div><div class="line number27 index26 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css plain">lastInput = Input;</code></div><div class="line number28 index27 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css plain">lastTime = now;</code></div><div class="line number29 index28 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">}</code></div><div class="line number30 index29 alt1"><code class="css plain">}</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="css plain">void SetTunings(</code><code class="css value">double</code> <code class="css plain">Kp, </code><code class="css value">double</code> <code class="css plain">Ki, </code><code class="css value">double</code> <code class="css plain">Kd)</code></div><div class="line number33 index32 alt2"><code class="css plain">{</code></div><div class="line number34 index33 alt1"><code class="css spaces">&nbsp;&nbsp;</code><code class="css value">double</code> <code class="css plain">SampleTimeInSec = ((</code><code class="css value">double</code><code class="css plain">)SampleTime)/</code><code class="css value">1000</code><code class="css plain">;</code></div><div class="line number35 index34 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">kp = Kp;</code></div><div class="line number36 index35 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">ki = Ki * SampleTimeInSec;</code></div><div class="line number37 index36 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">kd = Kd / SampleTimeInSec;</code></div><div class="line number38 index37 alt1"><code class="css plain">}</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="css plain">void SetSampleTime(int NewSampleTime)</code></div><div class="line number41 index40 alt2"><code class="css plain">{</code></div><div class="line number42 index41 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">if (NewSampleTime &gt; </code><code class="css value">0</code><code class="css plain">)</code></div><div class="line number43 index42 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">{</code></div><div class="line number44 index43 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css value">double</code> <code class="css plain">ratio&nbsp; = (</code><code class="css value">double</code><code class="css plain">)NewSampleTime</code></div><div class="line number45 index44 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css plain">/ (</code><code class="css value">double</code><code class="css plain">)SampleTime;</code></div><div class="line number46 index45 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css plain">ki *= ratio;</code></div><div class="line number47 index46 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css plain">kd /= ratio;</code></div><div class="line number48 index47 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="css plain">SampleTime = (unsigned long)NewSampleTime;</code></div><div class="line number49 index48 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">}</code></div><div class="line number50 index49 alt1"><code class="css plain">}</code></div><div class="line number51 index50 alt2">&nbsp;</div><div class="line number52 index51 alt1 highlighted"><code class="css plain">void SetOutputLimits(</code><code class="css value">double</code> <code class="css plain">Min, </code><code class="css value">double</code> <code class="css plain">Max)</code></div><div class="line number53 index52 alt2 highlighted"><code class="css plain">{</code></div><div class="line number54 index53 alt1 highlighted"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">if(Min &gt; Max) return;</code></div><div class="line number55 index54 alt2 highlighted"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">outMin = Min;</code></div><div class="line number56 index55 alt1 highlighted"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">outMax = Max;</code></div><div class="line number57 index56 alt2 highlighted"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number58 index57 alt1 highlighted"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">if(Output &gt; outMax) Output = outMax;</code></div><div class="line number59 index58 alt2 highlighted"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">else if(Output &lt; outMin) Output = outMin;</code></div><div class="line number60 index59 alt1 highlighted">&nbsp;</div><div class="line number61 index60 alt2 highlighted"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">if(ITerm&gt; outMax) ITerm= outMax;</code></div><div class="line number62 index61 alt1 highlighted"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">else if(ITerm&lt; outMin) ITerm= outMin;</code></div><div class="line number63 index62 alt2 highlighted"><code class="css plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>A new function was added to allow the user to specify the output limits [lines 52-63].  And these limits are used to clamp both the I-Term [17-18] and the Output [23-24]</p>
<h3>The Result</h3>
<p><a href="./05_files/No-Winup-Clamped.png"><img src="./05_files/No-Winup-Clamped.png" alt="" width="336" height="362" class="aligncenter size-full wp-image-948" srcset="http://brettbeauregard.com/blog/wp-content/uploads/2011/03/No-Winup-Clamped.png 336w, http://brettbeauregard.com/blog/wp-content/uploads/2011/03/No-Winup-Clamped-278x300.png 278w" sizes="(max-width: 336px) 100vw, 336px"></a><br>
As we can see, windup is eliminated.  in addition, the output stays where we want it to.  this means there’s no need for external clamping of the output.  if you want it to range from 23 to 167, you can set those as the Output Limits.<br>
<a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/improving-the-beginner%E2%80%99s-pid-onoff">Next &gt;&gt;</a><br>
<br>
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="./05_files/80x15.png"></a></p>
<p class="wp-flattr-button"><a href="http://brettbeauregard.com/blog/?flattrss_redirect&amp;id=769&amp;md5=574f781a861e94beb59911f697d110d6" title="Flattr" target="_blank"><img src="./05_files/flattr-badge-large.png" alt="flattr this!"></a></p>
								<p>Tags: <a href="http://brettbeauregard.com/blog/tag/arduino/" rel="tag">Arduino</a>, <a href="http://brettbeauregard.com/blog/tag/beginners-pid/" rel="tag">Beginner's PID</a>, <a href="http://brettbeauregard.com/blog/tag/pid/" rel="tag">PID</a></p>
				<p class="postmetadata alt">
					<small>
						This entry was posted
												on Friday, April 15th, 2011 at 3:04 pm						and is filed under <a href="http://brettbeauregard.com/blog/category/pid/coding/" rel="category tag">Coding</a>, <a href="http://brettbeauregard.com/blog/category/pid/" rel="category tag">PID</a>.
						You can follow any responses to this entry through the <a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/feed/">RSS 2.0</a> feed.

													You can <a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#respond">leave a response</a>, or <a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/trackback/" rel="trackback">trackback</a> from your own site.

						
					</small>
				</p>

			</div>
		</div>

	
<!-- You can start editing here. -->

	<h3 id="comments">13 Responses to “Improving the Beginner’s PID: Reset Windup”</h3>

	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>

	<ol class="commentlist">
			<li class="comment even thread-even depth-1" id="comment-18706">
				<div id="div-comment-18706" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./05_files/366cd0eb83bb2d101b54b32291e8b9dc" srcset="http://0.gravatar.com/avatar/366cd0eb83bb2d101b54b32291e8b9dc?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Jan Bert</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#comment-18706">
			July 22, 2011 at 6:36 am</a>		</div>

		<p>Thank you for your great explanation! What do you think of my suggestion?</p>
<p>Instead of separately clamping the Iterm, you could limit the Iterm a bit sooner. When the output is bigger than max, there is no point in increasing the Iterm.</p>
<p>if(Output &gt; outMax)<br>
{<br>
	// Anti wind-up: undo integration if output&gt;max<br>
	ITerm -= ki * error;<br>
	// Clamp output<br>
	Output = outMax;<br>
} </p>
<p>You could use a temporary variable for ‘ki * error’ to re-use the previous multiplication.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-18710">
				<div id="div-comment-18710" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./05_files/a549e72ed66e1c1e512afcc0f8c14f51" srcset="http://1.gravatar.com/avatar/a549e72ed66e1c1e512afcc0f8c14f51?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Brett</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#comment-18710">
			July 22, 2011 at 7:02 am</a>		</div>

		<p>That’s certainly something you could do.  I chose not to go that route because if the output is slammed around by the P and D terms it’s possible that it would incorrectly affect how the I term sums.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-18720">
				<div id="div-comment-18720" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./05_files/468a2bb79ee3c1be49036b0e7b444777" srcset="http://1.gravatar.com/avatar/468a2bb79ee3c1be49036b0e7b444777?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Will</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#comment-18720">
			July 22, 2011 at 9:15 am</a>		</div>

		<p>Another similar trick is to clamp the integral AFTER the output has been computed but before it is clamped.  so the math looks something like:</p>
<p>…<br>
iTerm += ki * error;<br>
…<br>
output = pTerm + iTerm + dTerm;<br>
if (output &gt; maxLimit)<br>
    iTerm -= output – maxLimit;<br>
    output = maxLimit;<br>
else if (output &lt; minLimit)<br>
    iTerm += minLimit – output;<br>
    output = minLimit;<br>
…</p>
<p>The difference is subtle but reduces the windup to zero instead of the really small error that still exists with clamping the iTerm to the limit instead of clamping the output to the limit.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-18721">
				<div id="div-comment-18721" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./05_files/468a2bb79ee3c1be49036b0e7b444777" srcset="http://1.gravatar.com/avatar/468a2bb79ee3c1be49036b0e7b444777?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Will</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#comment-18721">
			July 22, 2011 at 9:17 am</a>		</div>

		<p>doh!  formatting got removed.  should look like (underscore -&gt; tab/space):<br>
if (output &gt; maxLimit) {<br>
____iTerm -= output – maxLimit;<br>
____output = maxLimit;<br>
} else if (output &lt; minLimit) {<br>
____iTerm += minLimit – output;<br>
____output = minLimit;<br>
}</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-18722">
				<div id="div-comment-18722" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./05_files/a549e72ed66e1c1e512afcc0f8c14f51" srcset="http://1.gravatar.com/avatar/a549e72ed66e1c1e512afcc0f8c14f51?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Brett</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#comment-18722">
			July 22, 2011 at 9:20 am</a>		</div>

		<p>Will, excellent trick!  I think the next update to the library will be using this method</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-18780">
				<div id="div-comment-18780" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./05_files/961883bc4a0a1e4c4930b48262102ead" srcset="http://0.gravatar.com/avatar/961883bc4a0a1e4c4930b48262102ead?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Evan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#comment-18780">
			July 23, 2011 at 2:47 am</a>		</div>

		<p>Really great post. I’ve been interested in PIDs since I learned about them in an introductory control systems course. Our final project was making a PID very similar to your “beginner’s PID” on a PIC. Now, I’m thinking about using PID for an arduino project and I’m glad I’ve read this, since your code solves three problems I might not have known I had. I’ll use this info if I ever get around to my project idea.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-18787">
				<div id="div-comment-18787" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./05_files/a549e72ed66e1c1e512afcc0f8c14f51" srcset="http://1.gravatar.com/avatar/a549e72ed66e1c1e512afcc0f8c14f51?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Brett</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#comment-18787">
			July 23, 2011 at 6:56 am</a>		</div>

		<p>@Evan  remember that there’s actually a pid library for the arduino, so most of the hard work is already done there.  it’d be a shame for you to do it all from scratch, unless it’s something you intentionally want to do</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20106">
				<div id="div-comment-20106" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./05_files/641abb715f558b1027de45313ec8fc6d" srcset="http://0.gravatar.com/avatar/641abb715f558b1027de45313ec8fc6d?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Ali</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#comment-20106">
			August 15, 2011 at 2:49 pm</a>		</div>

		<p>Hi guys, I am using arduino to design a PI controller to control the flow rate in the system by controlling the pump’s output. Currently, I designed PI controller but it has got a delay in responding and the output is not stable. What do you suggest? I have taken the coded here for the pi controller but it did not work at all. does anybody have an Idea?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-20107">
				<div id="div-comment-20107" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./05_files/a549e72ed66e1c1e512afcc0f8c14f51" srcset="http://1.gravatar.com/avatar/a549e72ed66e1c1e512afcc0f8c14f51?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Brett</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#comment-20107">
			August 15, 2011 at 2:52 pm</a>		</div>

		<p>@Ali I recommend posting this question to the diy-pid-control google group.  that venue has a better setup for Q&amp;A</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-33978">
				<div id="div-comment-33978" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./05_files/fa469421944ce6bfab0a6827abde05d1" srcset="http://0.gravatar.com/avatar/fa469421944ce6bfab0a6827abde05d1?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn"><a href="http://www.dustynrobots.com/" rel="external nofollow" class="url">Dustyn</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#comment-33978">
			February 6, 2012 at 12:51 pm</a>		</div>

		<p>Wouldn’t the SetOutputLimits function get much smaller if you used the built in constrain(# to constrain, min, max) function within Arduino? Great code btw! Thanks</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-33982">
				<div id="div-comment-33982" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./05_files/a549e72ed66e1c1e512afcc0f8c14f51" srcset="http://1.gravatar.com/avatar/a549e72ed66e1c1e512afcc0f8c14f51?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Brett</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#comment-33982">
			February 6, 2012 at 1:47 pm</a>		</div>

		<p>@dustyn interesting!  I was unaware of the constrain function.  it may be faster, but I’m guessing that the code inside is probably similar to what I have here.  you’re also calling a function which I think will slightly increase ram usage.  still, something to try!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-78565">
				<div id="div-comment-78565" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./05_files/e553f5f3e24f48c66b16799842eba793" srcset="http://2.gravatar.com/avatar/e553f5f3e24f48c66b16799842eba793?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Svend</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#comment-78565">
			October 14, 2012 at 8:29 am</a>		</div>

		<p>I don’t see how your output limiting is working. As far as I can see, there is nothing keeping the proportional output being 100 (or what ever output high limit may be) and at the same time the integral output winding up to 100. But it may be that I don’t get the code right.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-79994">
				<div id="div-comment-79994" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./05_files/5f0c9a5d14efe272f5fe94ec3fc8021b" srcset="http://2.gravatar.com/avatar/5f0c9a5d14efe272f5fe94ec3fc8021b?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn"><a href="http://dkeenan.com/" rel="external nofollow" class="url">Dave Keenan</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#comment-79994">
			October 20, 2012 at 11:48 pm</a>		</div>

		<p>Did you consider using the “velocity form” of the equations so you only have to clamp the output. See <a href="http://en.wikipedia.org/wiki/Talk:PID_controller#Velocity_Form_Pseudocode" rel="nofollow">http://en.wikipedia.org/wiki/Talk:PID_controller#Velocity_Form_Pseudocode</a></p>

		
				</div>
		</li><!-- #comment-## -->
	</ol>

	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>
 


<div id="respond">

<h3>Leave a Reply</h3>

<div class="cancel-comment-reply">
	<small><a rel="nofollow" id="cancel-comment-reply-link" href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-reset-windup/#respond" style="display:none;">Click here to cancel reply.</a></small>
</div>


<form action="http://brettbeauregard.com/blog/wp-comments-post.php" method="post" id="commentform">


<p><input type="text" name="author" id="author" value="" size="22" tabindex="1" aria-required="true">
<label for="author"><small>Name (required)</small></label></p>

<p><input type="text" name="email" id="email" value="" size="22" tabindex="2" aria-required="true">
<label for="email"><small>Mail (will not be published) (required)</small></label></p>

<p><input type="text" name="url" id="url" value="" size="22" tabindex="3">
<label for="url"><small>Website</small></label></p>


<!--<p><small><strong>XHTML:</strong> You can use these tags: <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;s&gt; &lt;strike&gt; &lt;strong&gt; </code></small></p>-->

<p><textarea name="comment" id="comment" cols="100%" rows="10" tabindex="4"></textarea></p>

<p><input name="submit" type="submit" id="submit" tabindex="5" value="Submit Comment">
<input type="hidden" name="comment_post_ID" value="769" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p>
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="24705069d6"></p>
</form>

</div>


	
	</div>
 	<div id="sidebar">
		<ul>
						<li>
				<form role="search" method="get" id="searchform" class="searchform" action="http://brettbeauregard.com/blog/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s">
					<input type="submit" id="searchsubmit" value="Search">
				</div>
			</form>			</li>

			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Author</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			
		

			
				<li id="linkcat-3" class="linkcat"><h2>Links</h2>
	<ul class="xoxo blogroll">
<li><a href="http://groups.google.com/group/diy-pid-control/" title="PID Control Google Group"><img src="./05_files/diy-pid-control-link.jpg" alt="DIY PID Control" title="PID Control Google Group"></a></li>
<li><a href="http://www.ospid.com/blog/" title="osPID: The Open-Source PID controller"><img src="./05_files/osPID-Link.jpg" alt="osPID" title="osPID: The Open-Source PID controller"></a></li>
<li><a href="http://www.thingiverse.com/br3ttb" title="My Thingiverse Profile"><img src="./05_files/printed_portrait-small.jpg" alt="Thingiverse Profile" title="My Thingiverse Profile"></a></li>

	</ul>
</li>
<li id="linkcat-8" class="linkcat"><h2>This Site</h2>
	<ul class="xoxo blogroll">
<li><a href="http://brettbeauregard.com/about.html">About</a></li>
<li><a href="http://brettbeauregard.com/projects/" rel="me">Project Index</a></li>

	</ul>
</li>

	
			

			<li class="categories"><h2>Categories</h2><ul>	<li class="cat-item cat-item-7"><a href="http://brettbeauregard.com/blog/category/pid/">PID</a> (23)
<ul class="children">
	<li class="cat-item cat-item-31"><a href="http://brettbeauregard.com/blog/category/pid/coding/">Coding</a> (11)
</li>
	<li class="cat-item cat-item-33"><a href="http://brettbeauregard.com/blog/category/pid/front-end/">Front End</a> (2)
</li>
	<li class="cat-item cat-item-35"><a href="http://brettbeauregard.com/blog/category/pid/showcase/">Showcase</a> (4)
</li>
</ul>
</li>
	<li class="cat-item cat-item-5"><a href="http://brettbeauregard.com/blog/category/projects/">Projects</a> (40)
<ul class="children">
	<li class="cat-item cat-item-19"><a href="http://brettbeauregard.com/blog/category/projects/craft/">Craft</a> (6)
</li>
	<li class="cat-item cat-item-16"><a href="http://brettbeauregard.com/blog/category/projects/electronic/">Electronic</a> (12)
</li>
	<li class="cat-item cat-item-17"><a href="http://brettbeauregard.com/blog/category/projects/mechanical/">Mechanical</a> (26)
</li>
</ul>
</li>
	<li class="cat-item cat-item-1"><a href="http://brettbeauregard.com/blog/category/uncategorized/">Uncategorized</a> (5)
</li>
</ul></li><li><h2>Archives</h2>
				<ul>
					<li><a href="http://brettbeauregard.com/blog/2012/11/">November 2012</a></li>
	<li><a href="http://brettbeauregard.com/blog/2012/09/">September 2012</a></li>
	<li><a href="http://brettbeauregard.com/blog/2012/07/">July 2012</a></li>
	<li><a href="http://brettbeauregard.com/blog/2012/06/">June 2012</a></li>
	<li><a href="http://brettbeauregard.com/blog/2012/04/">April 2012</a></li>
	<li><a href="http://brettbeauregard.com/blog/2012/03/">March 2012</a></li>
	<li><a href="http://brettbeauregard.com/blog/2012/01/">January 2012</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/12/">December 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/10/">October 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/09/">September 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/08/">August 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/07/">July 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/06/">June 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/05/">May 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/04/">April 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2010/09/">September 2010</a></li>
	<li><a href="http://brettbeauregard.com/blog/2010/08/">August 2010</a></li>
	<li><a href="http://brettbeauregard.com/blog/2010/07/">July 2010</a></li>
	<li><a href="http://brettbeauregard.com/blog/2010/03/">March 2010</a></li>
	<li><a href="http://brettbeauregard.com/blog/2009/11/">November 2009</a></li>
	<li><a href="http://brettbeauregard.com/blog/2009/10/">October 2009</a></li>
	<li><a href="http://brettbeauregard.com/blog/2009/09/">September 2009</a></li>
	<li><a href="http://brettbeauregard.com/blog/2009/08/">August 2009</a></li>
	<li><a href="http://brettbeauregard.com/blog/2009/07/">July 2009</a></li>
	<li><a href="http://brettbeauregard.com/blog/2009/06/">June 2009</a></li>
	<li><a href="http://brettbeauregard.com/blog/2009/05/">May 2009</a></li>
				</ul>
			</li>
					</ul>
	</div>
<hr>
<div id="footer">
<!-- If you'd like to support WordPress, having the "powered by" link somewhere on your blog is the best way; it's our only promotion or advertising. -->
	<p>
		Project  Blog is proudly powered by
		<a href="http://wordpress.org/">WordPress</a>
		<br><a href="http://brettbeauregard.com/blog/feed/">Entries (RSS)</a>
		and <a href="http://brettbeauregard.com/blog/comments/feed/">Comments (RSS)</a>.
		<!-- 42 queries. 0.374 seconds. -->
	</p>
</div>
</div>

<!-- Gorgeous design by Michael Heilemann - http://binarybonsai.com/kubrick/ -->

		<script type="text/javascript" src="./05_files/shCore.js"></script>
<script type="text/javascript" src="./05_files/shBrushCss.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://brettbeauregard.com/blog/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83c";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://brettbeauregard.com/blog/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83c";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.defaults['wrap-lines'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="./05_files/comment-reply.min.js"></script>
<script type="text/javascript" src="./05_files/wp-embed.min.js"></script>


</body><iframe allowtransparency="true" frameborder="0" id="abs-top-frame" src="./05_files/top.html" style="position: fixed !important; z-index: 2147483647 !important; overflow: hidden !important; top: 0px !important; left: 0px !important; right: 0px !important; width: 138px !important; height: 13px !important; max-height: none !important; min-height: 0px !important; margin: 0px auto !important; padding: 0px !important; border: 0px !important; display: block !important; background-color: transparent !important;"></iframe></html>