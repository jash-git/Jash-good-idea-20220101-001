<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0081)http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<title>Improving the Beginner’s PID – Introduction «  Project  Blog</title>

<link rel="stylesheet" href="./01_files/style.css" type="text/css" media="screen">
<link rel="alternate" type="application/rss+xml" title="Project  Blog RSS Feed" href="http://brettbeauregard.com/blog/feed/">
<link rel="alternate" type="application/atom+xml" title="Project  Blog Atom Feed" href="http://brettbeauregard.com/blog/feed/atom/">
<link rel="pingback" href="http://brettbeauregard.com/blog/xmlrpc.php">

<style type="text/css" media="screen">

	#page { background: url("http://brettbeauregard.com/blog/wp-content/themes/default/images/kubrickbgwide.jpg") repeat-y top; border: none; }

</style>



            <script type="text/javascript" async="" src="./01_files/ga.js"></script><script type="text/javascript">//<![CDATA[
            // Google Analytics for WordPress by Yoast v4.3.3 | http://yoast.com/wordpress/google-analytics/
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-9013272-1']);
				            _gaq.push(['_trackPageview']);
            (function () {
                var ga = document.createElement('script');
                ga.type = 'text/javascript';
                ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';

                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(ga, s);
            })();
            //]]></script>
			<link rel="alternate" type="application/rss+xml" title="Project  Blog » Improving the Beginner’s PID – Introduction Comments Feed" href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/brettbeauregard.com\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.5"}};
			!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;if(!g||!g.fillText)return!1;switch(g.textBaseline="top",g.font="600 32px Arial",a){case"flag":return g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3;case"diversity":return g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e;case"simple":return g.fillText(h(55357,56835),0,0),0!==g.getImageData(16,16,1,1).data[0];case"unicode8":return g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./01_files/wp-emoji-release.min.js" type="text/javascript"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="thingiverse_style-css" href="./01_files/style(1).css" type="text/css" media="all">
<script type="text/javascript" src="./01_files/jquery.js"></script>
<script type="text/javascript" src="./01_files/jquery-migrate.min.js"></script>
<link rel="https://api.w.org/" href="http://brettbeauregard.com/blog/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://brettbeauregard.com/blog/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://brettbeauregard.com/blog/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Arduino Uno Keeps Header Offset" href="http://brettbeauregard.com/blog/2010/09/arduino-uno-keeps-header-offset/">
<link rel="next" title="Improving the Beginner’s PID – Sample Time" href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-sample-time/">
<meta name="generator" content="WordPress 4.5">
<link rel="canonical" href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/">
<link rel="shortlink" href="http://brettbeauregard.com/blog/?p=695">
<link rel="alternate" type="application/json+oembed" href="http://brettbeauregard.com/blog/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fbrettbeauregard.com%2Fblog%2F2011%2F04%2Fimproving-the-beginners-pid-introduction%2F">
<link rel="alternate" type="text/xml+oembed" href="http://brettbeauregard.com/blog/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fbrettbeauregard.com%2Fblog%2F2011%2F04%2Fimproving-the-beginners-pid-introduction%2F&amp;format=xml">
<link rel="payment" type="text/html" title="Flattr this!" href="https://flattr.com/submit/auto?user_id=br3ttb&amp;popout=1&amp;url=http%3A%2F%2Fbrettbeauregard.com%2Fblog%2F2011%2F04%2Fimproving-the-beginners-pid-introduction%2F&amp;language=en_GB&amp;category=text&amp;title=Improving+the+Beginner%26%238217%3Bs+PID+%26%238211%3B+Introduction&amp;description=Project+updates+and...+um...&amp;tags=Arduino%2CBeginner%27s+PID%2CPID%2Cblog">
<link rel="stylesheet" type="text/css" href="./01_files/shCore.css"><link rel="stylesheet" type="text/css" href="./01_files/shThemeDefault.css"><style type="text/css" id="syntaxhighlighteranchor"></style>
</head>
<body>
<div id="page">


<div id="header">
	<div id="headerimg">
		<h1><a href="http://brettbeauregard.com/blog/">Project  Blog</a></h1>
		<div class="description">Project updates and… um…</div>
	</div>
</div>
<hr>

	<div id="content" class="narrowcolumn">

	
		<div class="navigation">
			<div class="alignleft">« <a href="http://brettbeauregard.com/blog/2010/09/arduino-uno-keeps-header-offset/" rel="prev">Arduino Uno Keeps Header Offset</a></div>
			<div class="alignright"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginner%e2%80%99s-pid-sample-time/" rel="next">Improving the Beginner’s PID – Sample Time</a> »</div>
		</div>

		<div class="post-695 post type-post status-publish format-standard hentry category-coding category-pid tag-arduino tag-beginners-pid tag-pid author-admin" id="post-695">
			<h2>Improving the Beginner’s PID – Introduction</h2>

			<div class="entry">
				<p>In conjunction with the release of the new <a href="http://www.arduino.cc/playground/Code/PIDLibrary">Arduino PID Library</a> I’ve decided to release this series of posts.  The last library, while solid, didn’t really come with any code explanation.  This time around the plan is to explain in great detail why the code is the way it is.  I’m hoping this will be of use to two groups of people:</p>
<ul>
<li> People directly interested in what’s going on inside the Arduino PID library will get a detailed explanation.</li>
<li> Anyone writing their own PID algorithm can take a look at how I did things and borrow whatever they like. </li>
</ul>
<p>It’s going to be a tough slog, but I think I found a not-too-painful way to explain my code.&nbsp; I’m going to start with what I call “The Beginner’s PID.”&nbsp; I’ll then improve it step-by-step until we’re left with an efficient, robust pid algorithm.</p>
<h3>The Beginner’s PID</h3>
<p>Here’s the PID equation as everyone first learns it:</p>
<p><a href="http://brettbeauregard.com/blog/wp-content/uploads/2011/03/pidalgorithm.png"><img class="aligncenter size-medium wp-image-805" src="./01_files/pidalgorithm-300x72.png" alt="" width="300" height="72" srcset="http://brettbeauregard.com/blog/wp-content/uploads/2011/03/pidalgorithm-300x72.png 300w, http://brettbeauregard.com/blog/wp-content/uploads/2011/03/pidalgorithm.png 337w" sizes="(max-width: 300px) 100vw, 300px"></a></p>
<p>This leads pretty much everyone to write the following PID controller:</p>
<div><div id="highlighter_94652" class="syntaxhighlighter  css"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="css comments">/*working variables*/</code></div><div class="line number2 index1 alt1"><code class="css plain">unsigned long lastTime;</code></div><div class="line number3 index2 alt2"><code class="css value">double</code> <code class="css plain">Input, Output, Setpoint;</code></div><div class="line number4 index3 alt1"><code class="css value">double</code> <code class="css plain">errSum, lastErr;</code></div><div class="line number5 index4 alt2"><code class="css value">double</code> <code class="css plain">kp, ki, kd;</code></div><div class="line number6 index5 alt1"><code class="css plain">void Compute()</code></div><div class="line number7 index6 alt2"><code class="css plain">{</code></div><div class="line number8 index7 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css comments">/*How long since we last calculated*/</code></div><div class="line number9 index8 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">unsigned long now = millis();</code></div><div class="line number10 index9 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css value">double</code> <code class="css plain">timeChange = (</code><code class="css value">double</code><code class="css plain">)(now - lastTime);</code></div><div class="line number11 index10 alt2"><code class="css spaces">&nbsp;</code>&nbsp;</div><div class="line number12 index11 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css comments">/*Compute all the working error variables*/</code></div><div class="line number13 index12 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css value">double</code> <code class="css plain">error = Setpoint - Input;</code></div><div class="line number14 index13 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">errSum += (error * timeChange);</code></div><div class="line number15 index14 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css value">double</code> <code class="css plain">dErr = (error - lastErr) / timeChange;</code></div><div class="line number16 index15 alt1"><code class="css spaces">&nbsp;</code>&nbsp;</div><div class="line number17 index16 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css comments">/*Compute PID Output*/</code></div><div class="line number18 index17 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">Output = kp * error + ki * errSum + kd * dErr;</code></div><div class="line number19 index18 alt2"><code class="css spaces">&nbsp;</code>&nbsp;</div><div class="line number20 index19 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css comments">/*Remember some variables for next time*/</code></div><div class="line number21 index20 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">lastErr = error;</code></div><div class="line number22 index21 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">lastTime = now;</code></div><div class="line number23 index22 alt2"><code class="css plain">}</code></div><div class="line number24 index23 alt1"><code class="css spaces">&nbsp;</code>&nbsp;</div><div class="line number25 index24 alt2"><code class="css plain">void SetTunings(</code><code class="css value">double</code> <code class="css plain">Kp, </code><code class="css value">double</code> <code class="css plain">Ki, </code><code class="css value">double</code> <code class="css plain">Kd)</code></div><div class="line number26 index25 alt1"><code class="css plain">{</code></div><div class="line number27 index26 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">kp = Kp;</code></div><div class="line number28 index27 alt1"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">ki = Ki;</code></div><div class="line number29 index28 alt2"><code class="css spaces">&nbsp;&nbsp;&nbsp;</code><code class="css plain">kd = Kd;</code></div><div class="line number30 index29 alt1"><code class="css plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Compute() is called either regularly or irregularly, and it works pretty well.  This series isn’t about “works pretty well” though.  If we’re going to turn this code into something on par with industrial PID controllers, we’ll have to address a few things:</p>
<ol>
<li><strong><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/improving-the-beginner%E2%80%99s-pid-sample-time">Sample Time –</a></strong> The PID algorithm functions best if it is evaluated at a regular interval.  If the algorithm is aware of this interval, we can also simplify some of the internal math.</li>
<li><strong><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/improving-the-beginner%E2%80%99s-pid-derivative-kick">Derivative Kick –</a></strong> Not the biggest deal, but easy to get rid of, so we’re going to do just that.</li>
<li><strong><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/improving-the-beginner%E2%80%99s-pid-tuning-changes">On-The-Fly Tuning Changes –</a></strong> A good PID algorithm is one where tuning parameters can be changed without jolting the internal workings.</li>
<li><strong><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/improving-the-beginner%E2%80%99s-pid-reset-windup">Reset Windup Mitigation –</a></strong>We’ll go into what Reset Windup is, and implement a solution with side benefits</li>
<li><strong><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/improving-the-beginner%E2%80%99s-pid-onoff">On/Off (Auto/Manual) –</a></strong> In most applications, there is a desire to sometimes turn off the PID controller and adjust the output by hand, without the controller interfering</li>
<li><strong><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/improving-the-beginner%E2%80%99s-pid-initialization">Initialization –</a></strong> When the controller first turns on, we want a “bumpless transfer.”  That is, we don’t want the output to suddenly jerk to some new value</li>
<li><strong><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/improving-the-beginners-pid-direction">Controller Direction –</a></strong> This last one isn’t a change in the name of robustness per se.  it’s designed to ensure that the user enters tuning parameters with the correct sign.</li>
</ol>
<p>Once we’ve addressed all these issues, we’ll have a solid PID algorithm.  We’ll also, not coincidentally, have the code that’s being used in the lastest version of the Arduino PID Library.  So whether you’re trying to write your own algorithm, or trying to understand what’s going on inside the PID library, I hope this helps you out.   Let’s get started.<br>
<a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/improving-the-beginner%E2%80%99s-pid-sample-time">Next &gt;&gt;</a></p>
<p>UPDATE:  In all the code examples I’m using doubles.  On the Arduino, a double is the same as a float (single precision.)   True double precision is WAY overkill for PID.  If the language you’re using does true double precision, I’d recommend changing all doubles to floats.<br>
<br>
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="./01_files/80x15.png"></a></p>
<p class="wp-flattr-button"><a href="http://brettbeauregard.com/blog/?flattrss_redirect&amp;id=695&amp;md5=5cf8ba6b6a10bf7418cd0a6bf757a7c1" title="Flattr" target="_blank"><img src="./01_files/flattr-badge-large.png" alt="flattr this!"></a></p>
								<p>Tags: <a href="http://brettbeauregard.com/blog/tag/arduino/" rel="tag">Arduino</a>, <a href="http://brettbeauregard.com/blog/tag/beginners-pid/" rel="tag">Beginner's PID</a>, <a href="http://brettbeauregard.com/blog/tag/pid/" rel="tag">PID</a></p>
				<p class="postmetadata alt">
					<small>
						This entry was posted
												on Friday, April 15th, 2011 at 3:00 pm						and is filed under <a href="http://brettbeauregard.com/blog/category/pid/coding/" rel="category tag">Coding</a>, <a href="http://brettbeauregard.com/blog/category/pid/" rel="category tag">PID</a>.
						You can follow any responses to this entry through the <a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/feed/">RSS 2.0</a> feed.

													You can <a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/#respond">leave a response</a>, or <a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/trackback/" rel="trackback">trackback</a> from your own site.

						
					</small>
				</p>

			</div>
		</div>

	
<!-- You can start editing here. -->

	<h3 id="comments">59 Responses to “Improving the Beginner’s PID – Introduction”</h3>

	<div class="navigation">
		<div class="alignleft"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/comment-page-1/#comments">« Older Comments</a></div>
		<div class="alignright"></div>
	</div>

	<ol class="commentlist">
			<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-44873">
				<div id="div-comment-44873" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./01_files/a549e72ed66e1c1e512afcc0f8c14f51" srcset="http://1.gravatar.com/avatar/a549e72ed66e1c1e512afcc0f8c14f51?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Brett</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/comment-page-2/#comment-44873">
			April 25, 2012 at 4:05 pm</a>		</div>

		<p>@akshay this output can be passed to PWM logic.  on the arduino however, the PWM is too fast for a triac (assuming 60hz mains,) so you need to write your own code that implements a slower version of PWM: <a href="http://arduino.cc/playground/Code/PIDLibraryRelayOutputExample" rel="nofollow">http://arduino.cc/playground/Code/PIDLibraryRelayOutputExample</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-45381">
				<div id="div-comment-45381" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./01_files/8d92c6c7fe9b9fd92a2c155f84807439" srcset="http://2.gravatar.com/avatar/8d92c6c7fe9b9fd92a2c155f84807439?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Ven</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/comment-page-2/#comment-45381">
			April 28, 2012 at 12:27 am</a>		</div>

		<p>hi, is the code above in this website (under beginner’s PID) a code for arduino I can use for PID controller for DC motor. Basically I’m trying to get PID values of a spinning DC motor and I’m using IR sensor to get the rpm of the DC motor… whenever I put my finger on the DC motor, the rpm values will change thus allowing to get outputs of PID values to control the DC motor. so is this the code that allows me to do that?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1" id="comment-45422">
				<div id="div-comment-45422" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./01_files/a549e72ed66e1c1e512afcc0f8c14f51" srcset="http://1.gravatar.com/avatar/a549e72ed66e1c1e512afcc0f8c14f51?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Brett</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/comment-page-2/#comment-45422">
			April 28, 2012 at 8:26 am</a>		</div>

		<p>@ven you CAN use this code, but as I explain it has some deficiencies.  if you use the <a href="http://arduino.cc/playground/Code/PIDLibrary" rel="nofollow">Arduino PID Library</a> you will get a more robust controller.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-45576">
				<div id="div-comment-45576" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./01_files/8d92c6c7fe9b9fd92a2c155f84807439" srcset="http://2.gravatar.com/avatar/8d92c6c7fe9b9fd92a2c155f84807439?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Ven</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/comment-page-2/#comment-45576">
			April 29, 2012 at 1:00 am</a>		</div>

		<p>it seems like my comment did not go through this website. I wanted to ask few questions… well more like I have a problem here. I tried to use your code to print out the PID when I apply physical interruption on DC motor (severe change of rpm) but it seems like I”m not getting any PID values. How can I be able to solve this? I went to arduino library website and used some of basic output examples with still no results. Is there a way for me to send you my current code so that you can take a look at it to see what I’m doing wrong?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-64905">
				<div id="div-comment-64905" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./01_files/95c1f05ca8801456ab7d1fb2470c52e9" srcset="http://0.gravatar.com/avatar/95c1f05ca8801456ab7d1fb2470c52e9?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">akshay</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/comment-page-2/#comment-64905">
			July 26, 2012 at 10:00 am</a>		</div>

		<p>sir,<br>
you said that the PID output can be passed to the PWM logic. but can u please tell me what happens in the PWM logic . is it so that the PID value is multiplied with the duty cycle of the PWM. please explain . i just want to know how the PID output reduces or increases the PWM pulse width.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-84043">
				<div id="div-comment-84043" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./01_files/a45d6cbbc63c62ff44476ad1ec6f69a9" srcset="http://1.gravatar.com/avatar/a45d6cbbc63c62ff44476ad1ec6f69a9?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Sean</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/comment-page-2/#comment-84043">
			November 9, 2012 at 8:28 pm</a>		</div>

		<p>Hi Brett,</p>
<p>Without exagerating, I think this is one of the best blog articles I have ever read. It has shown me more about PID control than any robotics book with all of its theory has shown me. </p>
<p>Thank you for all of your help!!!!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-84287">
				<div id="div-comment-84287" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./01_files/004b8e9f73d6317a05754b2118f84990" srcset="http://0.gravatar.com/avatar/004b8e9f73d6317a05754b2118f84990?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">Greg</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/comment-page-2/#comment-84287">
			November 11, 2012 at 5:50 am</a>		</div>

		<p>Very nice tutorial, thanks so much! Is there any chance for a pdf version?</p>
<p>BR,</p>
<p>Greg</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-158149">
				<div id="div-comment-158149" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./01_files/1e5ec8397a1cbe232c72497fb8e4d8ec" srcset="http://1.gravatar.com/avatar/1e5ec8397a1cbe232c72497fb8e4d8ec?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn"><a href="http://www.wesg.ca/" rel="external nofollow" class="url">Wes</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/comment-page-2/#comment-158149">
			September 9, 2013 at 1:14 pm</a>		</div>

		<p>Hey Brett, great work with the library. It makes control system setups much faster.</p>
<p>How does the library deal with output scaling? By this I mean taking a large error (for a motor, say 1000 RPM, because it is just starting up) and scale it to fit an output of 0-255 (Arduino analog out)? Clearly 0-1000 is larger than 0-255 I’m just wondering how that works.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-176983">
				<div id="div-comment-176983" class="comment-body">
				<div class="comment-author vcard">
			<img alt="" src="./01_files/499a83dc1fba15b60dc10e7649391a35" srcset="http://1.gravatar.com/avatar/499a83dc1fba15b60dc10e7649391a35?s=64&amp;d=mm&amp;r=g 2x" class="avatar avatar-32 photo" height="32" width="32">			<cite class="fn">narayan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/comment-page-2/#comment-176983">
			September 28, 2013 at 11:30 am</a>		</div>

		<p>go on like this such that everyone knows whats happening in library so that  customization can be done using basic concept.</p>

		
				</div>
		</li><!-- #comment-## -->
	</ol>

	<div class="navigation">
		<div class="alignleft"><a href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/comment-page-1/#comments">« Older Comments</a></div>
		<div class="alignright"></div>
	</div>
 


<div id="respond">

<h3>Leave a Reply</h3>

<div class="cancel-comment-reply">
	<small><a rel="nofollow" id="cancel-comment-reply-link" href="http://brettbeauregard.com/blog/2011/04/improving-the-beginners-pid-introduction/#respond" style="display:none;">Click here to cancel reply.</a></small>
</div>


<form action="http://brettbeauregard.com/blog/wp-comments-post.php" method="post" id="commentform">


<p><input type="text" name="author" id="author" value="" size="22" tabindex="1" aria-required="true">
<label for="author"><small>Name (required)</small></label></p>

<p><input type="text" name="email" id="email" value="" size="22" tabindex="2" aria-required="true">
<label for="email"><small>Mail (will not be published) (required)</small></label></p>

<p><input type="text" name="url" id="url" value="" size="22" tabindex="3">
<label for="url"><small>Website</small></label></p>


<!--<p><small><strong>XHTML:</strong> You can use these tags: <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;s&gt; &lt;strike&gt; &lt;strong&gt; </code></small></p>-->

<p><textarea name="comment" id="comment" cols="100%" rows="10" tabindex="4"></textarea></p>

<p><input name="submit" type="submit" id="submit" tabindex="5" value="Submit Comment">
<input type="hidden" name="comment_post_ID" value="695" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p>
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="afa7f5e1ca"></p>
</form>

</div>


	
	</div>
 	<div id="sidebar">
		<ul>
						<li>
				<form role="search" method="get" id="searchform" class="searchform" action="http://brettbeauregard.com/blog/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s">
					<input type="submit" id="searchsubmit" value="Search">
				</div>
			</form>			</li>

			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Author</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			
		

			
				<li id="linkcat-3" class="linkcat"><h2>Links</h2>
	<ul class="xoxo blogroll">
<li><a href="http://groups.google.com/group/diy-pid-control/" title="PID Control Google Group"><img src="./01_files/diy-pid-control-link.jpg" alt="DIY PID Control" title="PID Control Google Group"></a></li>
<li><a href="http://www.ospid.com/blog/" title="osPID: The Open-Source PID controller"><img src="./01_files/osPID-Link.jpg" alt="osPID" title="osPID: The Open-Source PID controller"></a></li>
<li><a href="http://www.thingiverse.com/br3ttb" title="My Thingiverse Profile"><img src="./01_files/printed_portrait-small.jpg" alt="Thingiverse Profile" title="My Thingiverse Profile"></a></li>

	</ul>
</li>
<li id="linkcat-8" class="linkcat"><h2>This Site</h2>
	<ul class="xoxo blogroll">
<li><a href="http://brettbeauregard.com/about.html">About</a></li>
<li><a href="http://brettbeauregard.com/projects/" rel="me">Project Index</a></li>

	</ul>
</li>

	
			

			<li class="categories"><h2>Categories</h2><ul>	<li class="cat-item cat-item-7"><a href="http://brettbeauregard.com/blog/category/pid/">PID</a> (23)
<ul class="children">
	<li class="cat-item cat-item-31"><a href="http://brettbeauregard.com/blog/category/pid/coding/">Coding</a> (11)
</li>
	<li class="cat-item cat-item-33"><a href="http://brettbeauregard.com/blog/category/pid/front-end/">Front End</a> (2)
</li>
	<li class="cat-item cat-item-35"><a href="http://brettbeauregard.com/blog/category/pid/showcase/">Showcase</a> (4)
</li>
</ul>
</li>
	<li class="cat-item cat-item-5"><a href="http://brettbeauregard.com/blog/category/projects/">Projects</a> (40)
<ul class="children">
	<li class="cat-item cat-item-19"><a href="http://brettbeauregard.com/blog/category/projects/craft/">Craft</a> (6)
</li>
	<li class="cat-item cat-item-16"><a href="http://brettbeauregard.com/blog/category/projects/electronic/">Electronic</a> (12)
</li>
	<li class="cat-item cat-item-17"><a href="http://brettbeauregard.com/blog/category/projects/mechanical/">Mechanical</a> (26)
</li>
</ul>
</li>
	<li class="cat-item cat-item-1"><a href="http://brettbeauregard.com/blog/category/uncategorized/">Uncategorized</a> (5)
</li>
</ul></li><li><h2>Archives</h2>
				<ul>
					<li><a href="http://brettbeauregard.com/blog/2012/11/">November 2012</a></li>
	<li><a href="http://brettbeauregard.com/blog/2012/09/">September 2012</a></li>
	<li><a href="http://brettbeauregard.com/blog/2012/07/">July 2012</a></li>
	<li><a href="http://brettbeauregard.com/blog/2012/06/">June 2012</a></li>
	<li><a href="http://brettbeauregard.com/blog/2012/04/">April 2012</a></li>
	<li><a href="http://brettbeauregard.com/blog/2012/03/">March 2012</a></li>
	<li><a href="http://brettbeauregard.com/blog/2012/01/">January 2012</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/12/">December 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/10/">October 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/09/">September 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/08/">August 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/07/">July 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/06/">June 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/05/">May 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2011/04/">April 2011</a></li>
	<li><a href="http://brettbeauregard.com/blog/2010/09/">September 2010</a></li>
	<li><a href="http://brettbeauregard.com/blog/2010/08/">August 2010</a></li>
	<li><a href="http://brettbeauregard.com/blog/2010/07/">July 2010</a></li>
	<li><a href="http://brettbeauregard.com/blog/2010/03/">March 2010</a></li>
	<li><a href="http://brettbeauregard.com/blog/2009/11/">November 2009</a></li>
	<li><a href="http://brettbeauregard.com/blog/2009/10/">October 2009</a></li>
	<li><a href="http://brettbeauregard.com/blog/2009/09/">September 2009</a></li>
	<li><a href="http://brettbeauregard.com/blog/2009/08/">August 2009</a></li>
	<li><a href="http://brettbeauregard.com/blog/2009/07/">July 2009</a></li>
	<li><a href="http://brettbeauregard.com/blog/2009/06/">June 2009</a></li>
	<li><a href="http://brettbeauregard.com/blog/2009/05/">May 2009</a></li>
				</ul>
			</li>
					</ul>
	</div>
<hr>
<div id="footer">
<!-- If you'd like to support WordPress, having the "powered by" link somewhere on your blog is the best way; it's our only promotion or advertising. -->
	<p>
		Project  Blog is proudly powered by
		<a href="http://wordpress.org/">WordPress</a>
		<br><a href="http://brettbeauregard.com/blog/feed/">Entries (RSS)</a>
		and <a href="http://brettbeauregard.com/blog/comments/feed/">Comments (RSS)</a>.
		<!-- 38 queries. 0.338 seconds. -->
	</p>
</div>
</div>

<!-- Gorgeous design by Michael Heilemann - http://binarybonsai.com/kubrick/ -->

		<script type="text/javascript" src="./01_files/shCore.js"></script>
<script type="text/javascript" src="./01_files/shBrushCss.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://brettbeauregard.com/blog/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83c";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://brettbeauregard.com/blog/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83c";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.defaults['wrap-lines'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="./01_files/comment-reply.min.js"></script>
<script type="text/javascript" src="./01_files/wp-embed.min.js"></script>


</body><iframe allowtransparency="true" frameborder="0" id="abs-top-frame" src="./01_files/top.html" style="position: fixed !important; z-index: 2147483647 !important; overflow: hidden !important; top: 0px !important; left: 0px !important; right: 0px !important; width: 138px !important; height: 13px !important; max-height: none !important; min-height: 0px !important; margin: 0px auto !important; padding: 0px !important; border: 0px !important; display: block !important; background-color: transparent !important;"></iframe></html>